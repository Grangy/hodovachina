# Полное описание функционала сайта Hodova China

## Обзор проекта

Сайт для компании по оптовым поставкам товаров из Китая. Построен на Next.js 16 с использованием TypeScript, React 19, Tailwind CSS и Framer Motion для анимаций.

---

## 1. Структура страниц

### 1.1 Главная страница (`/`)
- **URL**: `/`
- **Описание**: Основная страница с общим контентом для всей России
- **Компоненты**:
  - Header (шапка сайта)
  - Hero (главный баннер)
  - Advantages (преимущества)
  - CooperationFormats (форматы сотрудничества)
  - WorkSteps (этапы работы)
  - Testimonials (отзывы)
  - FAQ (часто задаваемые вопросы)
  - ContactForm (форма обратной связи)
  - Footer (подвал)

### 1.2 Страницы городов (`/[city]`)
- **URL**: `/{slug-города}`
- **Описание**: Персонализированные страницы для каждого города
- **Поддерживаемые города**:
  - Донецк (`/donetsk`)
  - Ростов-на-Дону (`/rostov`)
  - Краснодар (`/krasnodar`)
  - Сочи (`/sochi`)
  - Волгоград (`/volgograd`)
  - Ставрополь (`/stavropol`)
  - Новороссийск (`/novorossiysk`)
  - Таганрог (`/taganrog`)
  - Астрахань (`/astrakhan`)

- **Особенности**:
  - Динамическая генерация метаданных (title, description, Open Graph)
  - Персонализированный контент с названием города
  - Уникальные контакты для каждого города (телефон, WhatsApp, Telegram, Instagram)
  - SEO-оптимизация для каждого города
  - Статическая генерация страниц (SSG) через `generateStaticParams`

### 1.3 Страница обучения (`/training`)
- **URL**: `/training`
- **Описание**: Страница с информацией об обучении работе с поставками из Китая
- **Функционал**:
  - Два формата обучения: групповое (12 999 ₽) и индивидуальное (39 999 ₽)
  - Скачивание программ обучения (PDF)
  - Форма записи на обучение
  - Отправка заявок в Telegram с типом "training"

### 1.4 Страница политики конфиденциальности (`/privacy`)
- **URL**: `/privacy`
- **Описание**: Политика конфиденциальности и обработки персональных данных

---

## 2. Система городов

### 2.1 Конфигурация городов
Файл: `app/data/cities.ts`

**Структура данных города:**
```typescript
interface CityData {
  slug: string;              // URL-слаг (например, "rostov")
  name: string;              // Название города (например, "Ростов-на-Дону")
  nameGenitive: string;      // Название в родительном падеже (для "из Ростова")
  phone: string;             // Телефон
  whatsapp: string;          // WhatsApp номер
  telegram: string;          // Telegram username
  telegramLink: string;      // Ссылка на Telegram
  instagram: string;         // Instagram username
  title: string;             // SEO title
  description: string;       // SEO description
}
```

### 2.2 Добавление нового города

**Шаги для добавления нового города:**

1. Откройте файл `app/data/cities.ts`
2. Добавьте новый объект в объект `cities`:
```typescript
export const cities: Record<string, CityData> = {
  // ... существующие города
  newcity: {
    slug: 'newcity',
    name: 'Новый Город',
    nameGenitive: 'Нового Города',
    phone: '+7 (XXX) XXX-XX-XX',
    whatsapp: '+7XXXXXXXXXX',
    telegram: '@hodovachina_newcity',
    telegramLink: 'https://t.me/hodovachina_newcity',
    instagram: 'hodovachina_newcity',
    title: 'Оптовые поставки товаров из Китая в Новый Город под ключ | Доставка',
    description: 'Выкуп, производство, брендирование, логистика и растаможка товаров из Китая в Новый Город. Опт от 100 000 ₽, совместные закупки от 5 000 ₽. Официальная доставка.',
  },
};
```

3. Страница автоматически сгенерируется при следующей сборке
4. URL будет доступен по адресу: `/{slug}` (например, `/newcity`)

### 2.3 Персонализация контента

Компоненты, которые адаптируются под город:

- **Hero**: 
  - Заголовок: "Поставки из Китая под ключ в {название города}"
  - Описание с упоминанием города
  - WhatsApp номер города

- **CooperationFormats**: 
  - Кнопки открывают модальное окно или WhatsApp с номером города

- **WorkSteps**: 
  - Шаг 5: "Организуем 'белую' доставку в {название города} и выдаём все документы"

- **ContactForm**: 
  - Заголовок: "Оставьте заявку — и мы рассчитаем вашу поставку из Китая в {название города}"
  - Контакты (WhatsApp, Telegram, Instagram) с данными города

- **Footer**: 
  - Блок: "Работаем в {название города}" / "Доставка в ваш город"

---

## 3. Компоненты

### 3.1 Header (Шапка сайта)
- **Файл**: `app/components/Header.tsx`
- **Функционал**:
  - Фиксированная позиция при скролле
  - Логотип с ссылкой на главную
  - Ссылка на страницу обучения
  - Кнопка "Оставить заявку" (открывает модальное окно)
  - Адаптивный дизайн (скрывает текст на мобильных)

### 3.2 Hero (Главный баннер)
- **Файл**: `app/components/Hero.tsx`
- **Функционал**:
  - Анимированная смена услуг (каждые 5 секунд)
  - Персонализированный заголовок с названием города
  - Кнопка "Рассчитать поставку" (открывает модальное окно)
  - Кнопка "Написать в WhatsApp" (открывает WhatsApp с номером города)
  - 3D-эффект наведения на изображение
  - Анимированные элементы (световое кольцо, орбитальный контур, плашки)
  - Учет предпочтений пользователя (reduced-motion)

### 3.3 Advantages (Преимущества)
- **Файл**: `app/components/Advantages.tsx`
- **Функционал**:
  - Отображение 6 преимуществ компании
  - Анимация появления при скролле
  - Адаптивная сетка (1 колонка на мобильных, 2 на планшетах, 3 на десктопе)

### 3.4 CooperationFormats (Форматы сотрудничества)
- **Файл**: `app/components/CooperationFormats.tsx`
- **Функционал**:
  - Два формата:
    1. **Крупный опт от 100 000 ₽**: Индивидуальный подбор, закупка с фабрик, документы
    2. **Совместные закупки от 5 000 ₽**: Для небольших заказов, объединение заказов
  - Кнопки открывают модальное окно или WhatsApp

### 3.5 WorkSteps (Этапы работы)
- **Файл**: `app/components/WorkSteps.tsx`
- **Функционал**:
  - Отображение 5 этапов работы
  - Персонализация последнего этапа с названием города
  - Кнопка "Рассчитать поставку"
  - Анимация появления

### 3.6 Testimonials (Отзывы)
- **Файл**: `app/components/Testimonials.tsx`
- **Функционал**:
  - Отображение отзывов клиентов
  - Поддержка персонализации под город (если реализовано)

### 3.7 FAQ (Часто задаваемые вопросы)
- **Файл**: `app/components/FAQ.tsx`
- **Функционал**:
  - Аккордеон с вопросами и ответами
  - Анимация раскрытия/закрытия

### 3.8 ContactForm (Форма обратной связи)
- **Файл**: `app/components/ContactForm.tsx`
- **Функционал**:
  - Поля: Имя, Телефон, WhatsApp (опционально), Комментарий
  - Автоматическое форматирование телефона
  - Валидация в реальном времени
  - Отправка данных в Telegram через API
  - Отображение контактов города (WhatsApp, Telegram, Instagram)
  - Персонализированный заголовок с названием города
  - Toast-уведомления об успехе/ошибке

### 3.9 Footer (Подвал)
- **Файл**: `app/components/Footer.tsx`
- **Функционал**:
  - Блок доверия (4 преимущества)
  - Логотип
  - Кнопка "Оставить заявку"
  - Копирайт
  - Персонализация блока "Работаем в {город}"

### 3.10 RequestModal (Модальное окно заявки)
- **Файл**: `app/components/RequestModal.tsx`
- **Функционал**:
  - Открывается по кнопке "Оставить заявку"
  - Поля: Имя, Телефон, Согласие с политикой конфиденциальности
  - Автофокус на первое поле
  - Закрытие по ESC или клику вне модального окна
  - Сохранение данных в localStorage
  - Автоматическое форматирование телефона
  - Валидация в реальном времени
  - Защита от спама (debounce 2 секунды)
  - Отправка в Telegram
  - Автоматическое закрытие после успешной отправки (1.5 сек)
  - Toast-уведомления

### 3.11 Toast (Уведомления)
- **Файл**: `app/components/Toast.tsx` и `app/components/ToastProvider.tsx`
- **Функционал**:
  - Показ уведомлений об успехе/ошибке
  - Автоматическое скрытие через несколько секунд
  - Анимация появления/исчезновения

### 3.12 ModalProvider (Провайдер модальных окон)
- **Файл**: `app/components/ModalProvider.tsx`
- **Функционал**:
  - Управление состоянием модального окна
  - Функции `openModal()` и `closeModal()`
  - Контекст для доступа из любых компонентов

---

## 4. API и интеграции

### 4.1 Telegram API
- **Файл**: `app/api/telegram/route.ts`
- **Endpoint**: `POST /api/telegram`
- **Функционал**:
  - Отправка сообщений в Telegram через бота
  - Поддержка двух типов сообщений:
    - `contact` - заявки с главной страницы
    - `training` - заявки на обучение
  - Логирование времени выполнения
  - Обработка ошибок

**Параметры запроса:**
```json
{
  "message": "Текст сообщения",
  "type": "contact" | "training"
}
```

**Конфигурация:**
- Bot Token: хранится в переменной `TELEGRAM_BOT_TOKEN`
- Chat ID: хранится в переменной `TELEGRAM_CHAT_ID`

---

## 5. Формы и валидация

### 5.1 Форма обратной связи (ContactForm)
- **Обязательные поля**: Имя, Телефон
- **Опциональные поля**: WhatsApp, Комментарий
- **Валидация**:
  - Имя: минимум 2 символа
  - Телефон: минимум 11 цифр
  - WhatsApp: минимум 11 цифр (если указан)
- **Форматирование**: Автоматическое форматирование телефона в формат `+7 (XXX) XXX-XX-XX`

### 5.2 Модальная форма заявки (RequestModal)
- **Обязательные поля**: Имя, Телефон, Согласие с политикой конфиденциальности
- **Валидация**: Аналогична ContactForm
- **Дополнительно**: Защита от спама (2 секунды между отправками)

### 5.3 Форма записи на обучение (TrainingForm)
- **Обязательные поля**: Имя, Телефон, Тип обучения
- **Опциональные поля**: Email, Комментарий
- **Валидация**:
  - Email: проверка формата (если указан)
  - Остальное аналогично другим формам

---

## 6. Адаптивность и темы

### 6.1 Адаптивный дизайн
- **Мобильные устройства** (< 768px):
  - Одна колонка для всех компонентов
  - Упрощенные анимации
  - Скрытие длинных текстов
  - Оптимизированные размеры кнопок (минимум 44px для удобства нажатия)

- **Планшеты** (768px - 1024px):
  - Две колонки для некоторых компонентов
  - Средние размеры шрифтов

- **Десктоп** (> 1024px):
  - Полная раскладка
  - Все анимации
  - Максимальная ширина контента 6xl (1152px)

### 6.2 Темы оформления
Сайт поддерживает несколько цветовых схем через Tailwind CSS:
- **Светлая тема** (по умолчанию)
- **Темная тема** (`dark:`)
- **Синяя тема** (`blue:`)
- **Монохромная тема** (`monochrome:`)

Тема задается через атрибут `data-theme` в `layout.tsx` (сейчас установлена `monochrome`).

---

## 7. SEO и метаданные

### 7.1 Главная страница
- Title: "Оптовые поставки товаров из Китая под ключ | Доставка по России"
- Description: Общее описание услуг

### 7.2 Страницы городов
- Динамический Title: "Оптовые поставки товаров из Китая в {Город} под ключ | Доставка"
- Динамический Description: Описание с упоминанием города
- Open Graph метатеги для социальных сетей

### 7.3 Другие страницы
- `/training`: Специфичные метаданные для страницы обучения
- `/privacy`: Метаданные для страницы политики конфиденциальности

---

## 8. Анимации

### 8.1 Библиотека
Используется **Framer Motion** для всех анимаций.

### 8.2 Типы анимаций
- **Fade In**: Появление элементов при скролле
- **Slide In**: Скольжение элементов
- **Scale**: Увеличение/уменьшение при наведении
- **3D Tilt**: Наклон элементов при движении курсора
- **Orbital**: Орбитальные анимации вокруг элементов

### 8.3 Доступность
- Учет предпочтений пользователя (`prefers-reduced-motion`)
- Отключение анимаций на мобильных устройствах (опционально)
- Плавные переходы для всех интерактивных элементов

---

## 9. Утилиты

### 9.1 Анимации
- **Файл**: `app/utils/animations.ts`
- **Функции**:
  - `useAnimationVariants()` - хуки для анимаций
  - `getViewportSettings()` - настройки viewport для анимаций

---

## 10. Изображения и медиа

### 10.1 Оптимизация
- Использование Next.js Image компонента
- Автоматическая оптимизация изображений
- Lazy loading для изображений вне viewport
- Responsive images с разными размерами

### 10.2 Структура изображений
- `/public/images/` - основные изображения сайта
- `/public/logo_*.png` - логотипы
- `/public/favicon-*.png` - иконки для разных устройств
- `/public/zakaz/` - изображения товаров (оборудование, упаковка, вендинг-автоматы)

---

## 11. Производительность

### 11.1 Оптимизации
- **Static Site Generation (SSG)** для страниц городов
- **Code Splitting** автоматически через Next.js
- **Image Optimization** через Next.js Image
- **Font Optimization** через Next.js Font Optimization
- **Lazy Loading** для компонентов и изображений

### 11.2 Кэширование
- Статические страницы кэшируются на уровне CDN
- Метаданные генерируются на этапе сборки

---

## 12. Безопасность

### 12.1 Защита форм
- Валидация на клиенте и сервере
- Защита от спама (debounce)
- Санитизация данных перед отправкой

### 12.2 Конфиденциальность
- Политика конфиденциальности
- Согласие на обработку данных
- Безопасная передача данных через HTTPS

---

## 13. Развертывание и сборка

### 13.1 Команды
```bash
npm run dev      # Запуск в режиме разработки
npm run build    # Сборка для продакшена
npm run start    # Запуск продакшен-версии
npm run lint     # Проверка кода линтером
```

### 13.2 Требования
- Node.js (версия указана в package.json)
- npm или yarn

---

## 14. Будущие улучшения

### 14.1 Потенциальные функции
- Админ-панель для управления городами
- CMS для управления контентом
- Интеграция с CRM
- Многоязычность
- Блог/новости
- Калькулятор стоимости доставки
- Отслеживание заказов
- Личный кабинет клиента

---

## 15. Контакты и поддержка

### 15.1 Контакты по умолчанию
- Телефон: +7 (999) 123-45-67
- WhatsApp: +79288440555
- Telegram: @hodovachina
- Instagram: hodovachina

### 15.2 Контакты городов
Каждый город имеет свои уникальные контакты, указанные в `app/data/cities.ts`.

---

## Заключение

Сайт представляет собой полнофункциональное решение для компании по оптовым поставкам из Китая с поддержкой множества городов, персонализацией контента, современным дизайном и оптимизацией для SEO и производительности.

